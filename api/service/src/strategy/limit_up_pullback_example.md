# æ¶¨åœå›è°ƒç­–ç•¥ä½¿ç”¨æ–‡æ¡£

## ç­–ç•¥æ¦‚è¿°

**æ¶¨åœå›è°ƒç­–ç•¥ (Limit Up Pullback Strategy)** æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºæ•æ‰å¼ºåŠ¿è‚¡å›è°ƒæœºä¼šçš„é€‰è‚¡ç­–ç•¥ã€‚

### æ ¸å¿ƒç†å¿µ

> "å¼ºè€…æ’å¼ºï¼Œå›è°ƒå³æ˜¯æœºä¼š"

æ¶¨åœä»£è¡¨äº†å¸‚åœºæœ€å¼ºçš„ä¹°ç›˜åŠ›é‡ï¼Œä½†æ¶¨åœåå¾€å¾€ä¼šæœ‰çŸ­æœŸå›è°ƒã€‚å½“è‚¡ä»·å›è°ƒåˆ°å…³é”®æ”¯æ’‘ä½ï¼ˆå¦‚5æ—¥çº¿ã€10æ—¥çº¿ï¼‰æ—¶ï¼Œæ˜¯äºŒæ¬¡ä»‹å…¥çš„è‰¯æœºã€‚

### ç­–ç•¥é€»è¾‘

```
ä»·æ ¼
  â†‘
  |    â˜… æ¶¨åœæ¿
  |   â•± â•²
  |  â•±   â•² â† å›è°ƒ
  | â•±     â—â”â”â” ä¹°å…¥ç‚¹ï¼ˆå›è°ƒåˆ°å‡çº¿ï¼‰
  |â•±    â•± â† MA5/MA10
  |â”€â”€â”€â”€â•±â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ—¶é—´
```

1. **æ¶¨åœç¡®è®¤** - è¿‘Nå¤©å†…å‡ºç°è¿‡æ¶¨åœï¼Œè¯æ˜æœ‰å¼ºåŠ¿èµ„é‡‘å…³æ³¨
2. **å›è°ƒåˆ°ä½** - è‚¡ä»·å›è°ƒåˆ°5æ—¥æˆ–10æ—¥å‡çº¿é™„è¿‘ï¼Œæä¾›å®‰å…¨è¾¹é™…
3. **æ”¯æ’‘æœ‰æ•ˆ** - å‡çº¿æ”¯æ’‘æœªç ´ï¼Œè¶‹åŠ¿ä»ç„¶å‘ä¸Š
4. **é‡èƒ½é…åˆ** - å›è°ƒæ—¶ç¼©é‡ï¼Œåå¼¹æ—¶æ”¾é‡

## é…ç½®è¯´æ˜

### LimitUpPullbackConfig

```rust
pub struct LimitUpPullbackConfig {
    /// å›æº¯å¤©æ•° - åœ¨å¤šå°‘å¤©å†…å¯»æ‰¾æ¶¨åœ - é»˜è®¤ 10 å¤©
    pub lookback_days: usize,
    
    /// æ¶¨åœé˜ˆå€¼ï¼ˆç™¾åˆ†æ¯”ï¼‰- é»˜è®¤ 9.8%ï¼ˆè€ƒè™‘è¯¯å·®ï¼‰
    pub limit_up_threshold: f64,
    
    /// ä½¿ç”¨çš„å‡çº¿ç±»å‹ - "MA5", "MA10", "BOTH"
    pub ma_type: String,
    
    /// å›è°ƒåˆ°å‡çº¿çš„å®¹å·®ï¼ˆç™¾åˆ†æ¯”ï¼‰- é»˜è®¤ 3%
    pub pullback_tolerance: f64,
    
    /// æœ€å°æ¶¨åœæ¬¡æ•° - é»˜è®¤ 1 æ¬¡
    pub min_limit_up_count: usize,
    
    /// æ˜¯å¦è¦æ±‚ç¼©é‡å›è°ƒ - é»˜è®¤ true
    pub require_volume_shrink: bool,
    
    /// ç¼©é‡æ¯”ä¾‹é˜ˆå€¼ - é»˜è®¤ 0.7
    pub volume_shrink_ratio: f64,
    
    /// æ˜¯å¦è¦æ±‚å‡çº¿å¤šå¤´æ’åˆ— - é»˜è®¤ false
    pub require_ma_bullish: bool,
}
```

### é…ç½®å‚æ•°è¯¦è§£

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ | å»ºè®®èŒƒå›´ |
|------|------|--------|----------|
| `lookback_days` | å›æº¯å¤©æ•°ï¼Œåœ¨å¤šå°‘å¤©å†…å¯»æ‰¾æ¶¨åœ | 10 | 5-20 |
| `limit_up_threshold` | æ¶¨åœé˜ˆå€¼ï¼ˆ%ï¼‰ï¼Œè€ƒè™‘è¯¯å·®å¯ä»¥è®¾ç½®ä¸º9.8% | 9.8 | 9.5-10.0 |
| `ma_type` | å‡çº¿ç±»å‹ï¼š"MA5"ã€"MA10"ã€"BOTH" | "BOTH" | - |
| `pullback_tolerance` | å›è°ƒå®¹å·®ï¼ˆ%ï¼‰ï¼Œå…è®¸ä»·æ ¼åœ¨å‡çº¿ä¸Šä¸‹N%èŒƒå›´å†… | 3.0 | 2.0-5.0 |
| `min_limit_up_count` | æœ€å°æ¶¨åœæ¬¡æ•° | 1 | 1-3 |
| `require_volume_shrink` | æ˜¯å¦è¦æ±‚ç¼©é‡å›è°ƒ | true | - |
| `volume_shrink_ratio` | ç¼©é‡æ¯”ä¾‹ï¼Œå½“å‰é‡ < å‡é‡ Ã— ratio | 0.7 | 0.5-0.8 |
| `require_ma_bullish` | æ˜¯å¦è¦æ±‚å‡çº¿å¤šå¤´æ’åˆ—ï¼ˆMA5>MA10>MA20ï¼‰ | false | - |

## ä½¿ç”¨ç¤ºä¾‹

### 1. æ ‡å‡†é…ç½®

é€‚åˆå¤§å¤šæ•°åœºæ™¯ï¼Œå›è°ƒåˆ°5æ—¥æˆ–10æ—¥çº¿é™„è¿‘ã€‚

```rust
use service::strategy::{LimitUpPullbackStrategy, LimitUpPullbackConfig};

// ä½¿ç”¨é»˜è®¤é…ç½®
let config = LimitUpPullbackConfig::default();
let mut strategy = LimitUpPullbackStrategy::new(config);

// æˆ–ä½¿ç”¨é¢„è®¾
let config = LimitUpPullbackStrategy::standard();
let mut strategy = LimitUpPullbackStrategy::new(config);
```

**é…ç½®ç‰¹ç‚¹ï¼š**
- å›æº¯10å¤©
- æ¶¨åœé˜ˆå€¼9.8%
- åŒæ—¶å…³æ³¨5æ—¥çº¿å’Œ10æ—¥çº¿
- å®¹å·®3%
- è¦æ±‚ç¼©é‡å›è°ƒ

### 2. æ¿€è¿›é…ç½®

é€‚åˆçŸ­çº¿äº¤æ˜“ï¼Œåªçœ‹5æ—¥çº¿ï¼Œå®¹å·®æ›´å¤§ã€‚

```rust
let config = LimitUpPullbackStrategy::aggressive();
let mut strategy = LimitUpPullbackStrategy::new(config);
```

**é…ç½®ç‰¹ç‚¹ï¼š**
- å›æº¯5å¤©ï¼ˆæ›´çŸ­æœŸï¼‰
- æ¶¨åœé˜ˆå€¼9.5%ï¼ˆæ›´å®½æ¾ï¼‰
- åªçœ‹5æ—¥çº¿
- å®¹å·®5%ï¼ˆæ›´å®½æ¾ï¼‰
- ä¸è¦æ±‚ç¼©é‡
- ä¸è¦æ±‚å¤šå¤´æ’åˆ—

**é€‚ç”¨åœºæ™¯ï¼š**
- çŸ­çº¿äº¤æ˜“
- è¿½æ±‚æ›´å¤šæœºä¼š
- èƒ½æ‰¿å—æ›´é«˜é£é™©

### 3. ç¨³å¥é…ç½®

é€‚åˆä¸­çº¿äº¤æ˜“ï¼Œåªçœ‹10æ—¥çº¿ï¼Œè¦æ±‚æ›´ä¸¥æ ¼ã€‚

```rust
let config = LimitUpPullbackStrategy::conservative();
let mut strategy = LimitUpPullbackStrategy::new(config);
```

**é…ç½®ç‰¹ç‚¹ï¼š**
- å›æº¯15å¤©ï¼ˆæ›´é•¿æœŸï¼‰
- æ¶¨åœé˜ˆå€¼9.9%ï¼ˆæ›´ä¸¥æ ¼ï¼‰
- åªçœ‹10æ—¥çº¿
- å®¹å·®2%ï¼ˆæ›´ä¸¥æ ¼ï¼‰
- è¦æ±‚ç¼©é‡å›è°ƒ
- è¦æ±‚å‡çº¿å¤šå¤´æ’åˆ—

**é€‚ç”¨åœºæ™¯ï¼š**
- ä¸­çº¿äº¤æ˜“
- è¿½æ±‚ç¨³å®šæ€§
- é£é™©åå¥½è¾ƒä½

### 4. å¼ºåŠ¿è‚¡é…ç½®

ä¸“é—¨å¯»æ‰¾å¤šæ¬¡æ¶¨åœçš„è¶…å¼ºåŠ¿è‚¡ã€‚

```rust
let config = LimitUpPullbackStrategy::strong_stock();
let mut strategy = LimitUpPullbackStrategy::new(config);
```

**é…ç½®ç‰¹ç‚¹ï¼š**
- è‡³å°‘2æ¬¡æ¶¨åœ
- å›è°ƒå¹…åº¦å°ï¼ˆå®¹å·®2%ï¼‰
- è¦æ±‚ç¼©é‡å›è°ƒ
- åªçœ‹5æ—¥çº¿

**é€‚ç”¨åœºæ™¯ï¼š**
- å¯»æ‰¾é¾™å¤´è‚¡
- è¿½æ±‚é«˜èƒœç‡
- çŸ­çº¿æ³¢æ®µäº¤æ˜“

### 5. è‡ªå®šä¹‰é…ç½®

æ ¹æ®è‡ªå·±çš„éœ€æ±‚çµæ´»é…ç½®ã€‚

```rust
let config = LimitUpPullbackConfig {
    lookback_days: 7,           // å›æº¯7å¤©
    limit_up_threshold: 9.9,    // æ¶¨åœé˜ˆå€¼9.9%
    ma_type: "MA5".to_string(), // åªçœ‹5æ—¥çº¿
    pullback_tolerance: 2.5,    // å®¹å·®2.5%
    min_limit_up_count: 1,      // è‡³å°‘1æ¬¡æ¶¨åœ
    require_volume_shrink: true, // è¦æ±‚ç¼©é‡
    volume_shrink_ratio: 0.6,   // ç¼©é‡æ¯”ä¾‹0.6
    require_ma_bullish: false,  // ä¸è¦æ±‚å¤šå¤´æ’åˆ—
};

let mut strategy = LimitUpPullbackStrategy::new(config);
```

## ç»“æœç»“æ„

### LimitUpPullbackResult

```rust
pub struct LimitUpPullbackResult {
    pub stock_code: String,              // è‚¡ç¥¨ä»£ç 
    pub analysis_date: NaiveDate,        // åˆ†ææ—¥æœŸ
    pub current_price: f64,              // å½“å‰ä»·æ ¼
    
    // æ¶¨åœä¿¡æ¯
    pub limit_up_dates: Vec<String>,     // æ¶¨åœæ—¥æœŸåˆ—è¡¨
    pub limit_up_count: usize,           // æ¶¨åœæ¬¡æ•°
    pub last_limit_up_date: String,      // æœ€è¿‘ä¸€æ¬¡æ¶¨åœæ—¥æœŸ
    pub last_limit_up_price: f64,        // æœ€è¿‘ä¸€æ¬¡æ¶¨åœä»·æ ¼
    pub highest_after_limit_up: f64,     // æ¶¨åœåæœ€é«˜ä»·
    pub pullback_from_high_pct: f64,     // ä»æœ€é«˜ç‚¹å›è°ƒå¹…åº¦ï¼ˆ%ï¼‰
    
    // å‡çº¿ä¿¡æ¯
    pub ma5: f64,                        // 5æ—¥å‡çº¿
    pub ma10: f64,                       // 10æ—¥å‡çº¿
    pub ma20: f64,                       // 20æ—¥å‡çº¿
    pub distance_to_ma5_pct: f64,        // è·ç¦»5æ—¥çº¿ï¼ˆ%ï¼‰
    pub distance_to_ma10_pct: f64,       // è·ç¦»10æ—¥çº¿ï¼ˆ%ï¼‰
    pub near_ma5: bool,                  // æ˜¯å¦åœ¨5æ—¥çº¿é™„è¿‘
    pub near_ma10: bool,                 // æ˜¯å¦åœ¨10æ—¥çº¿é™„è¿‘
    pub ma_bullish_aligned: bool,        // æ˜¯å¦å‡çº¿å¤šå¤´æ’åˆ—
    
    // æˆäº¤é‡ä¿¡æ¯
    pub current_volume: f64,             // å½“å‰æˆäº¤é‡
    pub avg_volume_5d: f64,              // 5æ—¥å¹³å‡æˆäº¤é‡
    pub is_volume_shrink: bool,          // æ˜¯å¦ç¼©é‡
    pub volume_ratio: f64,               // é‡æ¯”
    
    // å†å²æ¶¨è·Œå¹…
    pub daily_pct_changes: Vec<f64>,     // è¿‘lookback_dayså¤©çš„æ¯æ—¥æ¶¨è·Œå¹…ï¼ˆ%ï¼‰
                                         // æŒ‰æ—¶é—´é¡ºåºæ’åˆ—ï¼Œæœ€åä¸€ä¸ªæ˜¯æœ€è¿‘çš„
    
    // ç­–ç•¥ä¿¡å·
    pub strategy_signal: StrategySignal, // ç­–ç•¥ä¿¡å·
    pub signal_strength: u8,             // ä¿¡å·å¼ºåº¦ (0-100)
    pub analysis_description: String,    // åˆ†æè¯´æ˜
    pub risk_level: u8,                  // é£é™©ç­‰çº§ (1-5)
}
```

## ä¿¡å·è¯„åˆ†ä½“ç³»

### è¯„åˆ†ç»´åº¦ï¼ˆæ€»åˆ†100ï¼‰

#### 1. æ¶¨åœæ¬¡æ•°ï¼ˆ25åˆ†ï¼‰

| æ¶¨åœæ¬¡æ•° | å¾—åˆ† | è¯´æ˜ |
|----------|------|------|
| â‰¥3æ¬¡ | 25åˆ† | è¶…å¼ºåŠ¿è‚¡ |
| 2æ¬¡ | 20åˆ† | å¼ºåŠ¿è‚¡ |
| 1æ¬¡ | 15åˆ† | ä¸€èˆ¬å¼ºåŠ¿ |

#### 2. å‡çº¿ä½ç½®ï¼ˆ30åˆ†ï¼‰

**MA5æ¨¡å¼ï¼š**
- åœ¨5æ—¥çº¿é™„è¿‘ï¼ˆå®¹å·®å†…ï¼‰ï¼š30åˆ†
- è·ç¦»5æ—¥çº¿<5%ï¼š20åˆ†
- å…¶ä»–ï¼š0åˆ†

**MA10æ¨¡å¼ï¼š**
- åœ¨10æ—¥çº¿é™„è¿‘ï¼ˆå®¹å·®å†…ï¼‰ï¼š30åˆ†
- è·ç¦»10æ—¥çº¿<5%ï¼š20åˆ†
- å…¶ä»–ï¼š0åˆ†

**BOTHæ¨¡å¼ï¼š**
- åœ¨5æ—¥çº¿æˆ–10æ—¥çº¿é™„è¿‘ï¼š30åˆ†
- è·ç¦»ä»»ä¸€å‡çº¿<5%ï¼š20åˆ†
- å…¶ä»–ï¼š0åˆ†

#### 3. å›è°ƒå¹…åº¦ï¼ˆ20åˆ†ï¼‰

| å›è°ƒå¹…åº¦ | å¾—åˆ† | è¯´æ˜ |
|----------|------|------|
| 5%-10% | 20åˆ† | ç†æƒ³å›è°ƒ |
| 2%-5% | 15åˆ† | å›è°ƒä¸è¶³ |
| 10%-15% | 10åˆ† | å›è°ƒé€‚ä¸­ |
| <2% | 10åˆ† | å‡ ä¹æœªå›è°ƒ |
| >15% | 5åˆ† | å›è°ƒè¿‡æ·± |

#### 4. å‡çº¿å¤šå¤´æ’åˆ—ï¼ˆ15åˆ†ï¼‰

- MA5 > MA10 > MA20ï¼š+15åˆ†
- åŒæ—¶é£é™©ç­‰çº§-1

#### 5. ç¼©é‡å›è°ƒï¼ˆ10åˆ†ï¼‰

- ç¼©é‡å›è°ƒï¼ˆé‡æ¯”<0.7ï¼‰ï¼š+10åˆ†
- æ”¾é‡å›è°ƒï¼ˆé‡æ¯”>1.5ï¼‰ï¼šé£é™©ç­‰çº§+1

### ä¿¡å·ç­‰çº§

| ä¿¡å·å¼ºåº¦ | ä¿¡å·ç­‰çº§ | è¯´æ˜ |
|----------|----------|------|
| â‰¥80åˆ† | StrongBuy | å¼ºçƒˆä¹°å…¥ |
| 65-79åˆ† | Buy | ä¹°å…¥ |
| 50-64åˆ† | Hold | æŒæœ‰ |
| <50åˆ† | Sell | å–å‡º |

## é£é™©ç­‰çº§

### é£é™©è¯„ä¼°ï¼ˆ1-5çº§ï¼‰

**åŸºç¡€é£é™©ï¼š3çº§**

**é£é™©é™ä½å› ç´ ï¼š**
- å‡çº¿å¤šå¤´æ’åˆ—ï¼š-1çº§
- åœ¨å‡çº¿é™„è¿‘ï¼ˆå®¹å·®å†…ï¼‰ï¼šä¿æŒ

**é£é™©å¢åŠ å› ç´ ï¼š**
- è·Œç ´å‡çº¿>5%ï¼š+1çº§
- æ”¾é‡å›è°ƒï¼ˆé‡æ¯”>1.5ï¼‰ï¼š+1çº§

**æœ€ç»ˆé£é™©ç­‰çº§ï¼š**
- 1çº§ï¼šæä½é£é™©
- 2çº§ï¼šä½é£é™©
- 3çº§ï¼šä¸­ç­‰é£é™©
- 4çº§ï¼šè¾ƒé«˜é£é™©
- 5çº§ï¼šé«˜é£é™©

## ä¸ StockPickerService é›†æˆ

### åŸºæœ¬ç”¨æ³•

```rust
use service::StockPickerService;
use chrono::NaiveDate;

let service = StockPickerService::new(db_connection);

// ä½¿ç”¨é»˜è®¤é…ç½®
let results = service.pick_stocks(
    &NaiveDate::from_ymd(2024, 1, 1),
    &NaiveDate::from_ymd(2024, 12, 31),
    "limit_up_pullback",
    None  // ä½¿ç”¨é»˜è®¤é…ç½®
).await?;

// ä½¿ç”¨è‡ªå®šä¹‰é…ç½®
let custom_config = serde_json::json!({
    "lookback_days": 7,
    "limit_up_threshold": 9.9,
    "ma_type": "MA5",
    "pullback_tolerance": 2.5,
    "min_limit_up_count": 1,
    "require_volume_shrink": true,
    "volume_shrink_ratio": 0.6,
    "require_ma_bullish": false
});

let results = service.pick_stocks(
    &NaiveDate::from_ymd(2024, 1, 1),
    &NaiveDate::from_ymd(2024, 12, 31),
    "limit_up_pullback",
    Some(custom_config)
).await?;
```

### ç»“æœå¤„ç†

```rust
for result in results {
    println!("è‚¡ç¥¨: {} ({})", result.ts_code, result.name);
    println!("ä¿¡å·: {:?}, å¼ºåº¦: {}", result.signal, result.signal_strength);
    println!("é£é™©ç­‰çº§: {}", result.risk_level);
    println!("è¯´æ˜: {}", result.description);
    
    // è·å–è¯¦ç»†ç»“æœ
    if let StrategyResult::LimitUpPullback(detail) = result.strategy_result {
        println!("æ¶¨åœæ¬¡æ•°: {}", detail.limit_up_count);
        println!("æœ€è¿‘æ¶¨åœ: {}", detail.last_limit_up_date);
        println!("å›è°ƒå¹…åº¦: {:.2}%", detail.pullback_from_high_pct);
        println!("è·5æ—¥çº¿: {:.2}%", detail.distance_to_ma5_pct);
        println!("è·10æ—¥çº¿: {:.2}%", detail.distance_to_ma10_pct);
        println!("æ˜¯å¦ç¼©é‡: {}", detail.is_volume_shrink);
    }
}
```

## ç­–ç•¥ä¼˜åŠ¿

### âœ… ä¼˜ç‚¹

1. **é«˜èƒœç‡**
   - æ¶¨åœè¯æ˜æœ‰ä¸»åŠ›èµ„é‡‘
   - å›è°ƒæä¾›å®‰å…¨è¾¹é™…
   - å‡çº¿æä¾›æ”¯æ’‘

2. **é£é™©å¯æ§**
   - æ­¢æŸä½æ˜ç¡®ï¼ˆå‡çº¿ä¸‹æ–¹ï¼‰
   - å›è°ƒä¹°å…¥æ¯”è¿½æ¶¨åœå®‰å…¨
   - ç›ˆäºæ¯”é«˜

3. **æ“ä½œç®€å•**
   - ä¿¡å·æ˜ç¡®
   - è§„åˆ™æ¸…æ™°
   - æ˜“äºæ‰§è¡Œ

4. **çµæ´»æ€§å¼º**
   - å¤šç§é¢„è®¾é…ç½®
   - å‚æ•°å¯è°ƒ
   - é€‚åº”ä¸åŒé£æ ¼

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¸‚åœºç¯å¢ƒ**
   - ç‰›å¸‚æ•ˆæœæœ€å¥½
   - ç†Šå¸‚æ…ç”¨
   - éœ‡è¡å¸‚é€‰æ‹©æ€§ä½¿ç”¨

2. **ä¸ªè‚¡é€‰æ‹©**
   - é¿å…åŸºæœ¬é¢æ¶åŒ–çš„è‚¡ç¥¨
   - å…³æ³¨é¢˜æå’Œå‚¬åŒ–å‰‚
   - æ³¨æ„æµåŠ¨æ€§

3. **é£é™©æ§åˆ¶**
   - ä¸¥æ ¼æ­¢æŸï¼ˆè·Œç ´å‡çº¿ï¼‰
   - æ§åˆ¶ä»“ä½
   - åˆ†æ•£æŠ•èµ„

4. **å‡çªç ´**
   - ä¸€å­—æ¶¨åœåå¼€æ¿è¦è°¨æ…
   - æ”¾é‡å›è°ƒè­¦æƒ•
   - ç»“åˆå…¶ä»–æŒ‡æ ‡

## å®æˆ˜æŠ€å·§

### 1. æœ€ä½³ä¹°å…¥æ—¶æœº

- **ç†æƒ³æƒ…å†µ**ï¼šå›è°ƒåˆ°5æ—¥çº¿æˆ–10æ—¥çº¿ï¼Œç¼©é‡ï¼Œå‡ºç°æ­¢è·Œä¿¡å·
- **æ¿€è¿›ä¹°å…¥**ï¼šæ¥è¿‘å‡çº¿ä½†æœªåˆ°ï¼Œæå‰åŸ‹ä¼
- **ç¨³å¥ä¹°å…¥**ï¼šè§¦åŠå‡çº¿å¹¶ä¼ç¨³ï¼Œç¡®è®¤æ”¯æ’‘æœ‰æ•ˆ

### 2. æ­¢æŸè®¾ç½®

- **æ ‡å‡†æ­¢æŸ**ï¼šè·Œç ´å‡çº¿3%
- **æ¿€è¿›æ­¢æŸ**ï¼šè·Œç ´å‡çº¿å³æ­¢æŸ
- **ç¨³å¥æ­¢æŸ**ï¼šè·Œç ´å‡çº¿5%

### 3. æ­¢ç›ˆç­–ç•¥

- **ç›®æ ‡ä½1**ï¼šå›åˆ°æ¶¨åœä»·é™„è¿‘ï¼ˆ5%-10%æ”¶ç›Šï¼‰
- **ç›®æ ‡ä½2**ï¼šåˆ›æ–°é«˜ï¼ˆ10%-20%æ”¶ç›Šï¼‰
- **ç§»åŠ¨æ­¢ç›ˆ**ï¼šç›ˆåˆ©åå°†æ­¢æŸä½ä¸Šç§»è‡³æˆæœ¬ä»·

### 4. ä»“ä½ç®¡ç†

- **å•åªè‚¡ç¥¨**ï¼šä¸è¶…è¿‡æ€»èµ„é‡‘çš„20%
- **åŒç±»è‚¡ç¥¨**ï¼šä¸è¶…è¿‡æ€»èµ„é‡‘çš„40%
- **åˆ†æ‰¹å»ºä»“**ï¼šå¯ä»¥åœ¨å‡çº¿é™„è¿‘åˆ†2-3æ¬¡ä¹°å…¥

## é…ç½®å¯¹æ¯”

| é…ç½®ç±»å‹ | å›æº¯å¤©æ•° | å‡çº¿ | å®¹å·® | æ¶¨åœæ¬¡æ•° | ç¼©é‡è¦æ±‚ | å¤šå¤´æ’åˆ— | é€‚ç”¨åœºæ™¯ |
|----------|----------|------|------|----------|----------|----------|----------|
| æ ‡å‡† | 10å¤© | BOTH | 3% | 1æ¬¡ | æ˜¯ | å¦ | é€šç”¨ |
| æ¿€è¿› | 5å¤© | MA5 | 5% | 1æ¬¡ | å¦ | å¦ | çŸ­çº¿ |
| ç¨³å¥ | 15å¤© | MA10 | 2% | 1æ¬¡ | æ˜¯ | æ˜¯ | ä¸­çº¿ |
| å¼ºåŠ¿è‚¡ | 10å¤© | MA5 | 2% | 2æ¬¡ | æ˜¯ | å¦ | é¾™å¤´è‚¡ |

## å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆè¦ç­‰å›è°ƒï¼Œä¸ç›´æ¥è¿½æ¶¨åœï¼Ÿ

**A:** è¿½æ¶¨åœé£é™©å¤§ï¼Œå®¹æ˜“ä¹°åœ¨é«˜ç‚¹ã€‚å›è°ƒåˆ°å‡çº¿æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š
- ä»·æ ¼æ›´ä½ï¼Œå®‰å…¨è¾¹é™…æ›´å¤§
- æ­¢æŸä½æ˜ç¡®ï¼ˆå‡çº¿ä¸‹æ–¹ï¼‰
- ç›ˆäºæ¯”æ›´é«˜
- å¿ƒç†å‹åŠ›æ›´å°

### Q2: å¦‚ä½•åˆ¤æ–­å›è°ƒæ˜¯å¦åˆ°ä½ï¼Ÿ

**A:** ä¸»è¦çœ‹ä¸‰ä¸ªæ–¹é¢ï¼š
1. **ä»·æ ¼ä½ç½®**ï¼šæ¥è¿‘æˆ–è§¦åŠå‡çº¿
2. **æˆäº¤é‡**ï¼šå›è°ƒæ—¶ç¼©é‡
3. **Kçº¿å½¢æ€**ï¼šå‡ºç°æ­¢è·Œä¿¡å·ï¼ˆå¦‚é”¤å­çº¿ã€åå­—æ˜Ÿï¼‰

### Q3: æ¶¨åœåå¤šä¹…ä¼šå›è°ƒï¼Ÿ

**A:** æ²¡æœ‰å›ºå®šæ—¶é—´ï¼Œé€šå¸¸åœ¨1-5å¤©å†…ã€‚é…ç½®ä¸­çš„`lookback_days`å‚æ•°æ§åˆ¶å›æº¯èŒƒå›´ã€‚

### Q4: å¦‚æœè·Œç ´å‡çº¿æ€ä¹ˆåŠï¼Ÿ

**A:** ä¸¥æ ¼æ­¢æŸï¼Œè·Œç ´å‡çº¿3-5%åº”è¯¥ç¦»åœºã€‚ä¸è¦å¹»æƒ³åå¼¹ï¼Œä¿æŠ¤æœ¬é‡‘æœ€é‡è¦ã€‚

### Q5: å¯ä»¥ç”¨äºæœŸè´§æˆ–å…¶ä»–å¸‚åœºå—ï¼Ÿ

**A:** å¯ä»¥ï¼Œä½†éœ€è¦è°ƒæ•´å‚æ•°ï¼š
- æœŸè´§æ³¢åŠ¨å¤§ï¼Œå®¹å·®å¯ä»¥æ”¾å®½
- å¤–æ±‡å¸‚åœºå¯èƒ½éœ€è¦æ›´çŸ­çš„å‡çº¿
- åŠ å¯†è´§å¸éœ€è¦æ›´å¤§çš„å®¹å·®

### Q6: å¦‚ä½•æé«˜èƒœç‡ï¼Ÿ

**A:** å‡ ä¸ªå»ºè®®ï¼š
1. ç»“åˆåŸºæœ¬é¢ï¼Œé€‰æ‹©æœ‰é¢˜æçš„è‚¡ç¥¨
2. å…³æ³¨å¸‚åœºç¯å¢ƒï¼Œç‰›å¸‚æ•ˆæœæ›´å¥½
3. ä½¿ç”¨ç¨³å¥é…ç½®ï¼Œæé«˜ä¿¡å·è´¨é‡
4. ä¸¥æ ¼æ‰§è¡Œæ­¢æŸï¼Œä¿æŠ¤åˆ©æ¶¦

### Q7: daily_pct_changes å­—æ®µæœ‰ä»€ä¹ˆç”¨ï¼Ÿ

**A:** è¿™ä¸ªå­—æ®µè®°å½•äº†è¿‘ `lookback_days` å¤©çš„æ¯æ—¥æ¶¨è·Œå¹…ï¼Œå¯ä»¥ç”¨æ¥ï¼š
1. **åˆ†æèµ°åŠ¿**ï¼šæŸ¥çœ‹è‚¡ç¥¨æœ€è¿‘çš„æ³¢åŠ¨æƒ…å†µ
2. **è¯†åˆ«æ¶¨åœ**ï¼šæ‰¾å‡ºå“ªå‡ å¤©æ¶¨åœï¼ˆæ¶¨å¹…â‰ˆ9.8%ï¼‰
3. **è¯„ä¼°å›è°ƒ**ï¼šè®¡ç®—ä»æ¶¨åœåˆ°ç°åœ¨çš„å›è°ƒå¹…åº¦
4. **åˆ¤æ–­è¶‹åŠ¿**ï¼šè¿ç»­ä¸Šæ¶¨è¿˜æ˜¯éœ‡è¡å›è°ƒ

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```rust
// æ‰“å°æ¯æ—¥æ¶¨è·Œå¹…
for (i, pct) in result.daily_pct_changes.iter().enumerate() {
    println!("ç¬¬{}å¤©æ¶¨è·Œå¹…: {:.2}%", i + 1, pct);
}

// æ‰¾å‡ºæ¶¨åœæ—¥
let limit_up_days: Vec<usize> = result.daily_pct_changes.iter()
    .enumerate()
    .filter(|(_, &pct)| pct >= 9.8)
    .map(|(i, _)| i)
    .collect();
println!("æ¶¨åœæ—¥ç´¢å¼•: {:?}", limit_up_days);

// è®¡ç®—å¹³å‡æ¶¨è·Œå¹…
let avg_pct: f64 = result.daily_pct_changes.iter().sum::<f64>() 
    / result.daily_pct_changes.len() as f64;
println!("å¹³å‡æ¶¨è·Œå¹…: {:.2}%", avg_pct);
```

## æ€»ç»“

æ¶¨åœå›è°ƒç­–ç•¥æ˜¯ä¸€ä¸ª**é«˜èƒœç‡ã€é£é™©å¯æ§ã€æ“ä½œç®€å•**çš„é€‰è‚¡ç­–ç•¥ã€‚

**æ ¸å¿ƒè¦ç‚¹ï¼š**
1. æ¶¨åœè¯æ˜å¼ºåŠ¿
2. å›è°ƒæä¾›æœºä¼š
3. å‡çº¿æä¾›æ”¯æ’‘
4. ç¼©é‡ç¡®è®¤å¥åº·

**æˆåŠŸå…³é”®ï¼š**
- é€‰æ‹©åˆé€‚çš„é…ç½®
- ä¸¥æ ¼æ‰§è¡Œçºªå¾‹
- æ§åˆ¶ä»“ä½é£é™©
- åŠæ—¶æ­¢æŸæ­¢ç›ˆ

è®°ä½ï¼š**å¼ºè€…æ’å¼ºï¼Œå›è°ƒå³æ˜¯æœºä¼šï¼** ğŸš€
